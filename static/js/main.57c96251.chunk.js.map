{"version":3,"sources":["App.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Container/Container.module.css","services/imagesApi.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/Loader/Loader.js","components/Container/Container.js","images/default.png","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","api","fetchImages","searchQuery","page","url","fetch","then","response","ok","json","Promise","reject","Error","Searchbar","state","handleSearchChange","e","setState","currentTarget","value","toLowerCase","handleSearchSubmit","preventDefault","trim","props","onSubmitForm","toast","info","theme","className","s","searchbar","form","onSubmit","this","type","button","onClick","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","alt","src","srcBigImg","item","image","ImageGallery","images","list","map","id","tags","webformatURL","largeImageURL","prototype","PropTypes","arrayOf","shape","number","isRequired","func","Button","loadImages","btn","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","target","window","addEventListener","removeEventListener","console","log","createPortal","overlay","modal","modalImg","LoaderSpinner","loader","color","height","width","Container","children","container","App","isLoading","showModal","error","modalImage","getSearchValue","onLoadMore","prevState","scrollPage","setTimeout","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","openModal","dataset","prevProps","prevSearch","nextSearch","prevPage","nextPage","imagesAPI","hits","length","status","catch","finally","Loader","defaultImage","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.57c96251.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"error\":\"App_error__1umzI\",\"defaultImage\":\"App_defaultImage__3uWI8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\",\"modalImg\":\"Modal_modalImg__1ybZJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__2ey0n\",\"image\":\"ImageGalleryItem_image__2xsbt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ImageGallery_list__3mqUc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__3xaJM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1j2Bs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3RIox\"};","// import axios from 'axios';\nfunction fetchImages(searchQuery, page) {\n  const API_KEY = '23098575-38c072e060e8821b5779b85db';\n  const BASE_URL = 'https://pixabay.com/api/';\n  const url = `${BASE_URL}?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`No images for your request ${searchQuery}`),\n    );\n  });\n}\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import React, { Component } from 'react';\nimport s from './Searchbar.module.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSearchChange = e => {\n    this.setState({\n      searchQuery: e.currentTarget.value.toLowerCase(),\n    });\n  };\n\n  handleSearchSubmit = e => {\n    e.preventDefault();\n    if (this.state.searchQuery.trim() === '') {\n      toast.info('Enter your request', {\n        theme: 'dark',\n      });\n      return;\n    }\n    this.props.onSubmitForm(this.state.searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <>\n        <header className={s.searchbar}>\n          <form className={s.form} onSubmit={this.handleSearchSubmit}>\n            <button\n              type=\"submit\"\n              className={s.button}\n              onClick={this.handleSearchSubmit}\n            ></button>\n\n            <input\n              className={s.input}\n              type=\"text\"\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search images and photos\"\n              value={this.state.searchQuery}\n              onChange={this.handleSearchChange}\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ alt, src, onClick, srcBigImg }) {\n  return (\n    <li className={s.item} onClick={onClick}>\n      <img src={src} alt={alt} data-modal={srcBigImg} className={s.image} />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  // id: PropTypes.number.isRequired,\n  srcBigImg: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\n\nexport default function ImageGallery({ images, onClick }) {\n  return (\n    <ul className={s.list}>\n      {images.map(({ id, tags, webformatURL, largeImageURL }) => (\n        <ImageGalleryItem\n          key={id}\n          alt={tags}\n          src={webformatURL}\n          srcBigImg={largeImageURL}\n          onClick={onClick}\n        />\n      ))}\n    </ul>\n  );\n}\n\nImageGallery.prototype = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }),\n  ),\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ loadImages }) {\n  return (\n    <button type=\"button\" className={s.btn} onClick={loadImages}>\n      Load more...\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    // console.log('Modal componentDidMount');\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    // console.log('Modal componentWillUnmount');\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      //   console.log('Нажали ESC, нужно закрыть модалку');\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    // console.log('Кликнули в бекдроп');\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { src, alt } = this.props;\n    console.log(this.props);\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>\n          {<img className={s.modalImg} src={src} alt={alt} />}\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nclass LoaderSpinner extends Component {\n  render() {\n    return (\n      <Loader\n        className={s.loader}\n        type=\"Oval\"\n        color=\"#00BFFF\"\n        height={120}\n        width={120}\n      />\n    );\n  }\n}\n\nexport default LoaderSpinner;\n","import React from 'react';\nimport s from './Container.module.css';\n\nconst Container = ({ children }) => (\n  <div className={s.container}>{children}</div>\n);\n\nexport default Container;\n","export default __webpack_public_path__ + \"static/media/default.6ddcc1dc.png\";","import s from './App.module.css';\nimport React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport imagesAPI from './services/imagesApi';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nimport LoaderSpinner from './components/Loader';\nimport Container from './components/Container';\nimport defaultImage from './images/default.png';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    images: [],\n    page: 1,\n    isLoading: false,\n    showModal: false,\n    error: null,\n    modalImage: '',\n    alt: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevSearch = prevState.searchQuery;\n    const nextSearch = this.state.searchQuery;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (prevSearch !== nextSearch || prevPage !== nextPage) {\n      this.setState({ isLoading: true });\n\n      imagesAPI\n        .fetchImages(nextSearch, nextPage)\n        .then(({ hits }) => {\n          // console.log({ hits });\n\n          if (hits.length === 0) {\n            return this.setState({\n              status: 'rejected',\n              error: `No images for your request ${nextSearch}`,\n            });\n          }\n          this.setState(({ images, page }) => ({\n            images: [...images, ...hits],\n            page: page,\n            status: 'resolved',\n          }));\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }))\n        .finally(() => this.setState({ isLoading: false }));\n    }\n  }\n\n  // Сабмит формы и очистка\n  getSearchValue = searchQuery => {\n    this.setState({ searchQuery, images: [], page: 1, error: null });\n  };\n\n  // Загрузка дальнейших картинок\n\n  onLoadMore = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n\n    this.scrollPage();\n  };\n\n  //Скролл при подгрузке картинок\n  scrollPage = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  //Модалка\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  openModal = e => {\n    this.setState(() => ({\n      modalImage: e.target.dataset.modal,\n      alt: e.target.alt,\n    }));\n    this.toggleModal();\n  };\n\n  // РЕНДЕР СТРАНИЦЫ\n\n  render() {\n    const { images, error, isLoading, modalImage, alt, showModal } = this.state;\n    return (\n      <Container>\n        <div className={s.App}>\n          <Searchbar onSubmitForm={this.getSearchValue} />\n          {isLoading && <LoaderSpinner />}\n          {images.length > 0 && !error && (\n            <>\n              <ImageGallery onClick={this.openModal} images={images} />\n              <Button loadImages={this.onLoadMore} />\n            </>\n          )}\n          {showModal && (\n            <Modal onClose={this.toggleModal} src={modalImage} alt={alt} />\n          )}\n          {error && <p className={s.error}>{error}</p>}\n          {error && (\n            <div>\n              <img src={defaultImage} alt={error} className={s.defaultImage} />\n            </div>\n          )}\n          <ToastContainer autoClose={3000} />\n        </div>\n      </Container>\n    );\n  }\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__jo466\",\"form\":\"Searchbar_form__XuKjc\",\"button\":\"Searchbar_button__MhnaU\",\"button-label\":\"Searchbar_button-label__14f0Y\",\"input\":\"Searchbar_input__2C4aO\"};"],"sourceRoot":""}